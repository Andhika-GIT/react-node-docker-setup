FROM node:14

ARG DEFAULT_MONGO_HOST=localhost
ARG DEFAULT_MONGO_USERNAME=hubla
ARG DEFAULT_MONGO_PASSWORD=pass

WORKDIR /app

COPY package*.json .

RUN npm install

COPY . .

ENV MONGO_DB_HOST=${DEFAULT_MONGO_HOST}
ENV MONGO_DB_USERNAME=${DEFAULT_MONGO_USERNAME}
ENV MONGO_DB_PASSWORD=${DEFAULT_MONGO_PASSWORD}

EXPOSE 80

CMD [ "node", "app.js" ]